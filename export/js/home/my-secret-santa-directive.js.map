{"version":3,"names":[],"mappings":"","sources":["home/my-secret-santa-directive.js"],"sourcesContent":["/* globals Firebase */\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name home.directive:mySecretSanta\n   * @restrict EA\n   * @element\n   *\n   * @description\n   *\n   * @example\n     <example module=\"home\">\n       <file name=\"index.html\">\n        <my-secret-santa></my-secret-santa>\n       </file>\n     </example>\n   *\n   */\n  angular\n    .module('home')\n    .directive('mySecretSanta', mySecretSanta);\n\n  function mySecretSanta() {\n    return {\n      restrict: 'EA',\n      scope: {\n        userName: '=',\n        loggedIn: '='\n      },\n      bindToController: true,\n      templateUrl: 'home/my-secret-santa-directive.tpl.html',\n      controllerAs: 'mySecretSanta',\n      controller: function ($scope) {\n        var vm = this,\n            ref = new Firebase('https://amigo-secreto.firebaseio.com');\n\n        $scope.$watch('mySecretSanta.loggedIn', function () {\n          if (angular.isString(vm.userName) && vm.userName.length > 5) {\n            $getSecretSanta(vm.userName, function (santa) {\n              vm.name = santa;\n            });\n          } else {\n            vm.savedWishes = '';\n            vm.wishes = '';\n          }\n        });\n\n        function $getSecretSanta(userName, callback) {\n          var name;\n          ref.child(userName).child('santa').once('value', function (snapshot) {\n            name = snapshot.val();\n\n            if (angular.isString(name) && name !== '' && name !== userName) {\n              callback(name);\n            }\n          });\n        }\n      },\n      link: function (scope, element, attrs) {\n        /* jshint unused:false */\n        /* eslint \"no-unused-vars\": [2, {\"args\": \"none\"}] */\n      }\n    };\n  }\n}());\n"],"file":"home/my-secret-santa-directive.js","sourceRoot":"/source/"}